<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>02_内存管理</title>
</head>
<body>
<!--
问题: JS引擎如何管理内存?
  1. 内存生命周期
    1). 分配需要的内存: 定义变量 / 创建对象
    2). 使用(存/取)分配到的内存: 赋值 / 创建对象
    3). 不需要时将其释放/归还
  2. 释放内存
    * 为执行函数分配的栈空间内存: 函数执行完自动释放
    * 存储对象的堆空间内存: 当内存没有引用指向时, 对象成为垃圾对象, 垃圾回收器后面就会回收释放此内存
-->
<script type="text/javascript">
  // 定义变量 ==> 在栈空间分配内存
  var obj
  /*
  1). 创建对象:
      ==> 在堆空间为创建的对象分配内存
      ==> 向对象内存中保存对象数据
  2). 赋值: 将对象内存的地址值保存到obj的内存中
   */
  obj = {m: 1}

  /*
  赋值为null: 不需要时, 释放
  注意: 对象成为垃圾对象, 后面被垃圾回收器回收释放内存
        但obj本身内存并没有释放
   */
  obj = null


  /*
  函数开始执行, 会在栈空间为此次执行分配一片区域(函数栈内存)用来保存局部变量
  执行过程中如果创建了对象会在堆空间分配内存用来存储对象
  函数执行完, 函数栈内存会自动释放
      ==>所有局部变量都没了,
      ==>相关的对象也成功垃圾对象, 其内存会被回收释放
   */
  function fn() {
    var a = 3
    var b = {}
  }
  fn()
</script>
</body>
</html>